---
title: ‚òëÔ∏è Ensure workload has valid label values
slug: /built-in-rules/ensure-valid-restart-policy
displayed_sidebar: docs2
---

From the Kubernetes docs:

*"Only a `.spec.template.spec.restartPolicy` equal to Always is allowed, which is the default if not specified."*

Therefore, `restartPolicy` values like *OnFailure* or *Never* will be invalid and will not be applied as the user expect them to. 

**Targeted resources by this rule (types of **`kind`**):** Deployment / Pod / DaemonSet / ReplicaSet / ReplicationController

**Enabled by default?** True

**Policy as code identifier:** WORKLOAD_INCORRECT_RESTARTPOLICY_VALUE_ALWAYS

---

## This rule will fail

If `restartPolicy` is set with any value other than *Always*

```yaml
spec:
  template:
    spec:
      restartPolicy: Never
```

### Rule output in the CLI

```none
$ datree test *.yaml

>> File: failExample.yaml
‚ùå Ensure deployment-like resource is using a valid restart policy [1 occurrence]
üí° Incorrect value for key `restartPolicy` - any other value than `Always` is not supported by this resource
```

---

## How to fix this failure

Set `restartPolicy` to *Always* or don't include the `restartPolicy` key at all

```yaml
spec:
  template:
    spec:
      restartPolicy: Always
```

---

## Read more

- [stackoverflow - configure restart policy of pod from deployment](https://stackoverflow.com/a/63400639/959510)